<div class="container mt-4">
  <!-- Search & Sort -->
  <div class="row mb-3 align-items-end">
    <div class="col-md-2">
      <div class="card text-center">
        <span class="badge" [ngClass]="store.isLoading() ? 'bg-warning' : 'bg-success'">
          {{ store.isLoading() ? 'Loading' : 'Idle' }}
        </span>
      </div>
    </div>
    <div class="col-md-6">
      <label class="form-label fw-bold">Search</label>
      <input
        type="text"
        class="form-control"
        placeholder="Search by title..."
        [value]="store.filter.query()"
        (input)="store.updateQueryDebounced$($any($event.target).value)"
      />
    </div>

    <div class="col-md-4 text-end">
      <label class="form-label fw-bold d-block">Sort</label>
      <button class="btn btn-outline-primary w-100" (click)="onChangeOrder()">
        Sort: {{ store.filter.order() === 'asc' ? 'Ascending' : 'Descending' }}
      </button>
    </div>
  </div>

  <!-- Books Table -->
  <div class="card">
    <div class="card-header fw-bold">Books</div>

    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th style="width: 80px">ID</th>
            <th>Title</th>
          </tr>
        </thead>

        <tbody>
          @for (book of store.visibleBooks(); track book.id) {
          <tr>
            <td>{{ book.id }}</td>
            <td>{{ book.title }}</td>
          </tr>

          } @if (!store.visibleBooks().length) {
          <tr>
            <td colspan="2" class="text-center text-muted py-4">No books found</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>

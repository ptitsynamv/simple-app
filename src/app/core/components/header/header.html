<header role="banner" class="navbar navbar-expand-lg navbar-light bg-light border-bottom shadow-sm">
  <div class="container">
    <a
      class="navbar-brand fw-bold d-flex align-items-center"
      routerLink="/"
      aria-label="Simple App Home"
    >
      <span class="text-primary me-1">‚ù§</span> Simple App
    </a>

    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#appNavbar"
      aria-controls="appNavbar"
      aria-expanded="false"
      aria-label="Toggle navigation menu"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <nav id="appNavbar" class="collapse navbar-collapse" aria-label="Main Navigation">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a
            class="nav-link px-3"
            routerLink="/books-shell"
            routerLinkActive="active"
            aria-current="page"
          >
            Books
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link px-3" routerLink="/counter" routerLinkActive="active"> Counter </a>
        </li>
      </ul>

      <div class="d-flex align-items-center">
        @if (store.isPending()) {
        <div class="spinner-border spinner-border-sm me-2" role="status">
          <span class="visually-hidden">Loading user data...</span>
        </div>
        } @else if (store.error()) {
        <span class="text-warning small" role="alert">
          <i class="bi bi-exclamation-triangle"></i> Login Error
        </span>
        } @else if (store.userInfo(); as userInfo){
        <div class="dropdown">
          <button
            class="btn btn-link dropdown-toggle d-flex align-items-center text-dark text-decoration-none p-0"
            type="button"
            id="userMenu"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            [attr.aria-label]="'Settings for ' + userInfo.name"
          >
            <img class="user-avatar" aria-hidden="true" [src]="userInfo.picture" />
            <span class="fw-medium small d-none d-md-inline">{{ userInfo.name }}</span>
          </button>

          <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="userMenu">
            <li>
              <button class="dropdown-item py-2" type="button" (click)="handleLogout()">
                <i class="bi bi-box-arrow-right me-2" aria-hidden="true"></i> Log Out
              </button>
            </li>
          </ul>
        </div>
        }@else {
        <button
          type="button"
          class="btn btn-primary px-4 btn-login"
          (click)="handleLogin()"
          aria-label="Log in to your account"
        >
          <i class="bi bi-box-arrow-in-right me-1" aria-hidden="true"></i>
          Login
        </button>
        }
      </div>
    </nav>
  </div>
</header>
